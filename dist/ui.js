'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _blessed=require('blessed');var _blessed2=_interopRequireDefault(_blessed);var _blessedContrib=require('blessed-contrib');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PlayBox=function(_gauge){_inherits(PlayBox,_gauge);function PlayBox(options){_classCallCheck(this,PlayBox);return _possibleConstructorReturn(this,(PlayBox.__proto__||Object.getPrototypeOf(PlayBox)).call(this,options))}_createClass(PlayBox,[{key:'doProcessing',value:function doProcessing(percent,current_time,total_time){if(!this.ctx){throw'error: canvas context does not exist. setData() for gauges must be called after the gauge has been added to the screen via screen.append()'}var c=this.ctx;c.strokeStyle=this.options.stroke;c.fillStyle=this.options.fill;c.clearRect(0,0,this.canvasSize.width,this.canvasSize.height);if(percent<1.001){percent=percent*100}var width=percent/100*(this.canvasSize.width-3);c.fillRect(1,1,width,0);var textX=this.canvasSize.width-12;c.strokeStyle='normal';if(this.options.showLabel)c.fillText(current_time+'/'+total_time,textX,0)}}]);return PlayBox}(_blessedContrib.gauge);var Ui=function(){function Ui(){var _this2=this;_classCallCheck(this,Ui);this.screen=_blessed2.default.screen({debug:true,warnings:false,dockBorders:true,smartCSR:true,fullUnicode:true,title:'NECM'});this.initListWidget();this.initSearchWidget();this.initPlayBox();this.screen.on('element focus',function(cur,old){if(old.border)old.style.border.fg='default';if(cur.border)cur.style.border.fg='green';_this2.screen.render()});this.screen.key(['tab'],function(ch,key){_this2.screen.focusNext()});this.screen.key(['S-tab'],function(ch,key){_this2.screen.focusPrevious()});this.screen.key(['escape','q','C-c'],function(ch,key){process.exit()});this.list.focus();this.screen.render()}_createClass(Ui,[{key:'_bind',value:function _bind(){var _this3=this;for(var _len=arguments.length,methods=Array(_len),_key=0;_key<_len;_key++){methods[_key]=arguments[_key]}methods.forEach(function(method){return _this3[method]=_this3[method].bind(_this3)})}},{key:'initListWidget',value:function initListWidget(){this.list=_blessed2.default.list({mouse:true,keys:true,vi:true,align:'left',label:' \u7F51\u6613\u4E91\u97F3\u4E50 ',border:'line',width:'50%',height:'50%',top:'center',left:'center',padding:1,items:[' 0. loading',' 1. loading',' 2. loading',' 3. loading',' 4. loading',' 5. loading',' 6. loading',' 7. loading',' 8. loading',' 9. loading'],style:{fg:'blue',bg:'default',border:{fg:'default',bg:'default'},selected:{fg:'#f0f0f0',bg:'green'}}});this.screen.append(this.list)}},{key:'initSearchWidget',value:function initSearchWidget(){var _this4=this;this.searchBox=_blessed2.default.textbox({label:' \u641C\u7D22 ',content:'',border:'line',style:{fg:'blue',bg:'default',bar:{bg:'default',fg:'blue'},border:{fg:'default',bg:'default'}},padding:{left:1},width:'30%',height:3,right:0,top:2,keys:true,vi:true,mouse:true});this.searchBox.on('submit',function(value){if(value)_this4.list.setLabel(' \u641C\u7D22> '+value+' ');_this4.list.focus();_this4.searchBox.clearInput();_this4.screen.render()});this.screen.append(this.searchBox)}},{key:'initPlayBox',value:function initPlayBox(){this.playBox=new PlayBox({label:' playing... ',border:'line',width:'50%',height:4,left:'center',top:'75%',stroke:'green'});this.screen.append(this.playBox)}}]);return Ui}();exports.default=Ui;